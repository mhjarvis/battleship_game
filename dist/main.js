(()=>{"use strict";class e{constructor(e,t){this.name=e,this.length=t,this.numberOfHits=0,this.isSunk=!1,this.isHorizontal=!1}hit(){this.numberOfHits+=1}checkIfSunk(){this.length===this.numberOfHits&&(this.isSunk=!0)}}class t{constructor(){this.board=this.createBoard(),this.numberOfShipsSunk=0,this.ships=[this.createShip("patrolboat",2),this.createShip("submarine",3),this.createShip("cruiser",3),this.createShip("battleship",4),this.createShip("carrier",5)]}createBoard(){let e=[];for(let t=0;t<100;t++)e.push(void 0);return e}createShip(t,i){return new e(t,i)}placeShip(e,t){this.board[t-1]=e}receiveAttack(e){}testAllSunk(){return 5===this.numberOfShipsSunk}getShipOrientation(e){console.log("nothing")}getShipSize(e){this.ships.find((e=>e===this.ships.name))}}let i,n="",r=!1,s=[];const o=e=>{let t=document.querySelector(`#${e.id}`);const i=document.querySelector(".ship-container");if(t.classList.contains("test")){t.classList.remove("test");let e=t.clientWidth,n=t.clientHeight;t.style.width=`${n}px`,t.style.height=`${e}px`,i.style.flexDirection="row"}else{t.classList.add("test");let e=t.clientWidth,n=t.clientHeight;t.style.width=`${n}px`,t.style.height=`${e}px`,i.style.flexDirection="column"}},a=e=>{var t;n=e.target.id,i="carrier"===(t=n)?5:"battleship"===t?4:"cruiser"===t||"submarine"===t?3:"patrolboat"===t?2:void 0,e.dataTransfer.setData("text/plain",e.target.id),e.dataTransfer.dropEffect="move"},l=e=>{e.addEventListener("dragenter",(e=>{e.preventDefault(),function(){for(let e=0;e<s.length;e++)document.getElementById(s[e]).classList.remove("gray")}(),function(e){let t=parseInt(e);if(s=[t],!1===r)for(let e=1;e<i;e++)t+=10,t>0&&t<101&&s.push(t);else for(let e=1;e<i&&(t-=1,t%10!=0);e++)t>0&&t<101&&s.push(t);console.log(s)}(e.target.id),function(){for(let e=0;e<s.length;e++)document.getElementById(s[e]).classList.add("gray")}()})),e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("dragleave",(e=>{e.preventDefault()})),e.addEventListener("drop",(e=>{if(e.preventDefault(),c(),c())for(let e of s)t=n,i=e,d.placeShip(t,i),console.log(d.board);var t,i;e.dataTransfer.getData("text/plain")}))};function c(e){return i===s.length}let d,h;function u(e){const t=d.ships.findIndex((t=>t.name===e));d.ships[t].isHorizontal=!d.ships[t].isHorizontal,console.log("ship isHorizontal: ",d.ships[t].isHorizontal)}!function(){function e(e,t,i,n){for(let r=1;r<=e.board.length;r++){const e=document.querySelector(`#${t}`),s=document.createElement("div");s.className=i+"grid",s.id=n+r,s.innerText=r,e.append(s)}}d=new t,h=new t,e(d,"player-area","p",""),e(h,"computer-area","c","c"),function(){const e=document.querySelector("#flip"),t=document.querySelectorAll(".ship-piece"),i=document.querySelectorAll(".pgrid");e.addEventListener("click",(()=>{for(let e of t)o(e),u(e.id),r=!r}));for(let e of t)window.addEventListener("DOMContentLoaded",(()=>{document.getElementById(e.id).addEventListener("dragstart",a)}));for(let e of i)l(e)}()}()})();