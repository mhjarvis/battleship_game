(()=>{"use strict";class t{constructor(t,e){this.name=t,this.length=e,this.numberOfHits=0,this.isSunk=!1,this.isHorizontal=!1}hit(){this.numberOfHits+=1}checkIfSunk(){this.length===this.numberOfHits&&(this.isSunk=!0)}}class e{constructor(){this.board=this.createBoard(),this.numberOfShipsSunk=0,this.ships=[this.createShip("patrolboat",2),this.createShip("submarine",3),this.createShip("cruiser",3),this.createShip("battleship",4),this.createShip("carrier",5)]}createBoard(){let t=[];for(let e=0;e<100;e++)t.push(void 0);return t}createShip(e,n){return new t(e,n)}receiveAttack(t,e){const n=this.board[t],i=document.getElementById(e);if(void 0===n)this.board[t]="miss",i.classList.add("miss");else{this.board[t]="hit",i.classList.add("hit"),i.classList.remove("ship-color");for(let t of this.ships)t.name===n&&(t.hit(),t.checkIfSunk(),t.isSunk&&this.increaseSunk())}}increaseSunk(){this.numberOfShipsSunk++}testAllSunk(){return 5===this.numberOfShipsSunk}}function n(t){let e=document.getElementById(t.target.id);!function(t){let e=t.slice(1);o.receiveAttack(e,t),r()}(t.target.id),document.getElementById("output").innerText="CPU is thinking...",setTimeout((function(){!function(){document.getElementById("output").innerText="Computer is thinking...";let t=a()+1;for(;;){if("hit"!==i.board[t]&&"miss"!==i.board[t]){i.receiveAttack(t,t);break}t=a()+1}document.getElementById("output").innerText="Your shot!",r()}()}),500),e.removeEventListener("click",n)}let i,o;function r(){const t=document.getElementById("output");!0===i.testAllSunk()&&(t.innerText="The Computer beat you this time!",m()),!0===o.testAllSunk()&&(t.innerText="You won this round!",m())}function s(){h(document.getElementById("computer-area")),o.board=[],function(t,e,n){for(let t=1;t<=100;t++){const e=document.querySelector("#computer-area"),n=document.createElement("div");n.className="cgrid",n.id="c"+t,e.append(n),void 0!==o.board[t-1]&&document.getElementById("c"+t).classList.add(o.board[t-1])}}();for(let t=0;t<5;t++){let e=o.ships[t],n=u(),i=!1,r=[];for(;!1===i;)if(!0===n){let t=c(e.length),n=!0;for(let e of t)(e<=0||void 0!==o.board[e])&&(n=!1);!0===n&&(i=!0,r=t)}else{let t=l(e.length),n=!0;for(let e of t)(e<0||e%10==0&&e!=t[0]||void 0!==o.board[e])&&(n=!1);!0===n&&(i=!0,r=t)}for(let t of r)o.board[t]=e.name}}function d(){h(document.getElementById("player-area")),i.board=[],function(t,e,n){for(let t=1;t<=100;t++){const e=document.querySelector("#player-area"),n=document.createElement("div");n.className="pgrid",n.id=""+t,e.append(n),void 0!==i.board[t-1]&&document.getElementById(""+t).classList.add("playerBoard.board[i - 1]")}}();for(let t=0;t<5;t++){let e=i.ships[t],n=u(),o=!1,r=[];for(;!1===o;)if(!0===n){let t=c(e.length),n=!0;for(let e of t)(e<=0||void 0!==i.board[e])&&(n=!1);!0===n&&(o=!0,r=t)}else{let t=l(e.length),n=!0;for(let e of t)(e<0||e%10==0&&e!=t[0]||void 0!==i.board[e])&&(n=!1);!0===n&&(o=!0,r=t)}for(let t of r)i.board[t]=e.name}for(let t=0;t<100;t++)void 0!==i.board[t]&&document.getElementById(t).classList.add("ship-color")}function c(t){let e=a(),n=[e];for(let i=1;i<t;i++)e-=10,n.push(e);return n}function l(t){let e=a(),n=[e];for(let i=1;i<t;i++)e-=1,n.push(e);return n}function a(){return Math.floor(100*Math.random())}function u(){return Math.random()>=.5}function h(t){for(;t.firstChild;)t.firstChild.className="",t.removeChild(t.firstChild)}function m(){for(let t=1;t<=100;t++)document.getElementById(`c${t}`).removeEventListener("click",n)}i=new e,o=new e,d(),s(),function(){const t=document.getElementById("randomize-button"),r=document.getElementById("start-button"),c=document.getElementById("reset-button");t.addEventListener("click",(()=>{d()})),r.addEventListener("click",(()=>{t.classList.toggle("hidden"),r.classList.toggle("hidden"),c.classList.toggle("hidden"),function(){const t=document.querySelectorAll(".cgrid");for(let e of t)e.addEventListener("click",n)}(),document.getElementById("output").innerText="Your Shot!"})),c.addEventListener("click",(()=>{t.classList.toggle("hidden"),r.classList.toggle("hidden"),c.classList.toggle("hidden"),i=new e,o=new e,d(),s()}))}()})();