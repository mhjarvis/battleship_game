(()=>{"use strict";class e{constructor(e,t){this.name=e,this.length=t,this.numberOfHits=0,this.isSunk=!1,this.isHorizontal=!1}hit(){this.numberOfHits+=1}checkIfSunk(){this.length===this.numberOfHits&&(this.isSunk=!0)}}class t{constructor(){this.board=this.createBoard(),this.numberOfShipsSunk=0,this.ships=[this.createShip("patrolboat",2),this.createShip("submarine",3),this.createShip("cruiser",3),this.createShip("battleship",4),this.createShip("carrier",5)]}createBoard(){let e=[];for(let t=0;t<100;t++)e.push(void 0);return e}createShip(t,n){return new e(t,n)}receiveAttack(e,t){const n=this.board[e],i=document.getElementById(t);if(void 0===n)this.board[e]="miss",i.classList.add("miss");else{this.board[e]="hit",i.classList.add("hit"),i.classList.remove("ship-color");for(let e of this.ships)e.name===n&&(e.hit(),e.checkIfSunk(),e.isSunk&&this.increaseSunk())}}increaseSunk(){this.numberOfShipsSunk++}testAllSunk(){return 5===this.numberOfShipsSunk}}function n(e){let t=document.getElementById(e.target.id);!function(e){let t=e.slice(1);o.receiveAttack(t,e),r()}(e.target.id),document.getElementById("output").innerText="CPU is thinking...",setTimeout((function(){!function(){document.getElementById("output").innerText="Computer is thinking...";let e=a()+1;for(;;){if("hit"!==i.board[e]&&"miss"!==i.board[e]){i.receiveAttack(e,e);break}e=a()+1}document.getElementById("output").innerText="Your shot!",r()}()}),500),t.removeEventListener("click",n)}let i,o;function r(){const e=document.getElementById("output");console.log("Num of CPU ships sunk: ",o.numberOfShipsSunk),!0===i.testAllSunk()&&(e.innerText="The Computer beat you this time!",m()),!0===o.testAllSunk()&&(e.innerText="You won this round!",m())}function s(){h(document.getElementById("computer-area")),o.board=[],function(e,t,n){for(let e=1;e<=100;e++){const t=document.querySelector("#computer-area"),n=document.createElement("div");n.className="cgrid",n.id="c"+e,t.append(n),void 0!==o.board[e-1]&&document.getElementById("c"+e).classList.add(o.board[e-1])}}();for(let e=0;e<5;e++){let t=o.ships[e],n=u(),i=!1,r=[];for(;!1===i;)if(!0===n){let e=c(t.length),n=!0;for(let t of e)(t<=0||void 0!==o.board[t])&&(n=!1);!0===n&&(i=!0,r=e)}else{let e=l(t.length),n=!0;for(let t of e)(t<0||t%10==0&&t!=e[0]||void 0!==o.board[t])&&(n=!1);!0===n&&(i=!0,r=e)}for(let e of r)o.board[e]=t.name}for(let e=0;e<100;e++)void 0!==o.board[e]&&document.getElementById("c"+e).classList.add("ship-color")}function d(){h(document.getElementById("player-area")),i.board=[],function(e,t,n){for(let e=1;e<=100;e++){const t=document.querySelector("#player-area"),n=document.createElement("div");n.className="pgrid",n.id=""+e,t.append(n),void 0!==i.board[e-1]&&document.getElementById(""+e).classList.add("playerBoard.board[i - 1]")}}();for(let e=0;e<5;e++){let t=i.ships[e],n=u(),o=!1,r=[];for(;!1===o;)if(!0===n){let e=c(t.length),n=!0;for(let t of e)(t<=0||void 0!==i.board[t])&&(n=!1);!0===n&&(o=!0,r=e)}else{let e=l(t.length),n=!0;for(let t of e)(t<0||t%10==0&&t!=e[0]||void 0!==i.board[t])&&(n=!1);!0===n&&(o=!0,r=e)}for(let e of r)i.board[e]=t.name}for(let e=0;e<100;e++)void 0!==i.board[e]&&document.getElementById(e).classList.add("ship-color")}function c(e){let t=a(),n=[t];for(let i=1;i<e;i++)t-=10,n.push(t);return n}function l(e){let t=a(),n=[t];for(let i=1;i<e;i++)t-=1,n.push(t);return n}function a(){return Math.floor(100*Math.random())}function u(){return Math.random()>=.5}function h(e){for(;e.firstChild;)e.firstChild.className="",e.removeChild(e.firstChild)}function m(){for(let e=1;e<=100;e++)document.getElementById(`c${e}`).removeEventListener("click",n)}i=new t,o=new t,d(),s(),function(){const e=document.getElementById("randomize-button"),r=document.getElementById("start-button"),c=document.getElementById("reset-button");e.addEventListener("click",(()=>{d()})),r.addEventListener("click",(()=>{e.classList.toggle("hidden"),r.classList.toggle("hidden"),c.classList.toggle("hidden"),function(){const e=document.querySelectorAll(".cgrid");for(let t of e)t.addEventListener("click",n)}(),document.getElementById("output").innerText="Your Shot!"})),c.addEventListener("click",(()=>{e.classList.toggle("hidden"),r.classList.toggle("hidden"),c.classList.toggle("hidden"),i=new t,o=new t,d(),s()}))}()})();